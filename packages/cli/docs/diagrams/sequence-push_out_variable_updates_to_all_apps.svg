<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="542px" preserveAspectRatio="none" style="width:7130px;height:542px;background:#FFFFFF;" version="1.1" viewBox="0 0 7130 542" width="7130px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="667" x="3230.75" y="28.5352">sequence diagram - push variable updates out to a new materialized config for each service</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="66" x2="66" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="442" x2="442" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1095.5" x2="1095.5" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1883" x2="1883" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2548" x2="2548" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2699" x2="2699" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3289" x2="3289" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3996" x2="3996" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4200" x2="4200" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4382" x2="4382" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4980" x2="4980" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="5183" x2="5183" y1="118.9766" y2="461.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="7071.5" x2="7071.5" y1="118.9766" y2="461.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="5" y="116.0234">ServiceDeveloper</text><ellipse cx="66.5" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M66.5,58.9883 L66.5,85.9883 M53.5,66.9883 L79.5,66.9883 M66.5,85.9883 L53.5,100.9883 M66.5,85.9883 L79.5,100.9883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="5" y="473.9277">ServiceDeveloper</text><ellipse cx="66.5" cy="485.3809" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M66.5,493.3809 L66.5,520.3809 M53.5,501.3809 L79.5,501.3809 M66.5,520.3809 L53.5,535.3809 M66.5,520.3809 L79.5,535.3809 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="406" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="413" y="108.0234">GH_repo</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="406" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="413" y="480.9277">GH_repo</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="1052.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="1059.5" y="108.0234">cenv_ci_cd</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="1052.5" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="1059.5" y="480.9277">cenv_ci_cd</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="1850" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="1857" y="108.0234">cenv_cli</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="1850" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="1857" y="480.9277">cenv_cli</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="2470" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="2477" y="108.0234">AWS_ParameterStore</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="2470" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="2477" y="480.9277">AWS_ParameterStore</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="2637" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="2644" y="108.0234">AWS_AppConfig</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="2637" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="2644" y="480.9277">AWS_AppConfig</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191" x="3194" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="3201" y="108.0234">SNS_materialization_topic</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191" x="3194" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="3201" y="480.9277">SNS_materialization_topic</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="219" x="3887" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="3894" y="108.0234">CENV_materialization_lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="219" x="3887" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="3894" y="480.9277">CENV_materialization_lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="4116" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="4123" y="108.0234">SNS_invalidation_topic</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="4116" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="4123" y="480.9277">SNS_invalidation_topic</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="4294" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="4301" y="108.0234">SNS_invalidateion_topic</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="4294" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="4301" y="480.9277">SNS_invalidateion_topic</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="4882" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="4889" y="108.0234">CENV_invalidation_lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="4882" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="4889" y="480.9277">CENV_invalidation_lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="190" x="5088" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="5095" y="108.0234">cenv_invalidation_lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="190" x="5088" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="5095" y="480.9277">cenv_invalidation_lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="7019.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="7026.5" y="108.0234">AWS_Lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="7019.5" y="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="7026.5" y="480.9277">AWS_Lambda</text><polygon fill="#181818" points="430.5,146.2871,440.5,150.2871,430.5,154.2871,434.5,150.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="66.5" x2="436.5" y1="150.2871" y2="150.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="73.5" y="145.5449">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="339" x="86.5" y="145.5449">A developer publishes a new release on the monorepo</text><polygon fill="#181818" points="1083.5,175.5977,1093.5,179.5977,1083.5,183.5977,1087.5,179.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="442.5" x2="1089.5" y1="179.5977" y2="179.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="449.5" y="174.8555">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="616" x="462.5" y="174.8555">The cenv_ci_cd github action workflow invokes determines that a new release has been published</text><polygon fill="#181818" points="1871.5,204.9082,1881.5,208.9082,1871.5,212.9082,1875.5,208.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1095.5" x2="1877.5" y1="208.9082" y2="208.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1102.5" y="204.166">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="751" x="1115.5" y="204.166">The cenv_ci_cd github action calls 'cenv deploy -aa' which intern executes 'cenv deploy' on each service that uses cenv</text><polygon fill="#181818" points="2536.5,234.2188,2546.5,238.2188,2536.5,242.2188,2540.5,238.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1883.5" x2="2542.5" y1="238.2188" y2="238.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1890.5" y="233.4766">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="628" x="1903.5" y="233.4766">The cenv_cli then updates and or writes and updated parameters to the AWS Parameter Store service</text><polygon fill="#181818" points="2687.5,263.5293,2697.5,267.5293,2687.5,271.5293,2691.5,267.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1883.5" x2="2693.5" y1="267.5293" y2="267.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1890.5" y="262.7871">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="497" x="1903.5" y="262.7871">Then the cli will create an AppConfig deployment against the 'cenv' application</text><polygon fill="#181818" points="3277.5,292.8398,3287.5,296.8398,3277.5,300.8398,3281.5,296.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2699.5" x2="3283.5" y1="296.8398" y2="296.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="2706.5" y="292.0977">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="553" x="2719.5" y="292.0977">Then the cenv AppConfig app will send a notification via the cenv_materialization_topic</text><polygon fill="#181818" points="3984.5,322.1504,3994.5,326.1504,3984.5,330.1504,3988.5,326.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="3289.5" x2="3990.5" y1="326.1504" y2="326.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="3296.5" y="321.4082">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="670" x="3309.5" y="321.4082">The SNS_materialization_topic will deliver the deployment notification to the cenv_materialization_lambda</text><polygon fill="#181818" points="2710.5,351.4609,2700.5,355.4609,2710.5,359.4609,2706.5,355.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2704.5" x2="3995.5" y1="355.4609" y2="355.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="2716.5" y="350.7188">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="1090" x="2729.5" y="350.7188">The cenv_materialization_lambda will then materialize all the parameters required for each service into a config file and write it to the apps's AppConfig configuration profile</text><polygon fill="#181818" points="4188,380.7715,4198,384.7715,4188,388.7715,4192,384.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2699.5" x2="4194" y1="384.7715" y2="384.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="2706.5" y="380.0293">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="503" x="2719.5" y="380.0293">Then the cenv AppConfig will send a notification to the SNS_invalidateion_topic</text><polygon fill="#181818" points="4968,410.082,4978,414.082,4968,418.082,4972,414.082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="4382" x2="4974" y1="414.082" y2="414.082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="4389" y="409.3398">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="552" x="4411" y="409.3398">The SNS_invalidation_topic will deliver the notification to the cenv_invalidation_lambda</text><polygon fill="#181818" points="7060,439.3926,7070,443.3926,7060,447.3926,7064,443.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="5183" x2="7066" y1="443.3926" y2="443.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="5190" y="438.6504">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="1843" x="5212" y="438.6504">The cenv_invalidation_lambda will then invalidate any lambdas tied to this service config by updating an environment variable on the lambda with a new timestamp (which invalidates functions and forces them back into a spot where it needs to perform a cold start before it can execute again)</text><!--MD5=[0491ad8ff61de181775a3067862212a7]
@startuml
'https://plantuml.com/sequence-diagram

autonumber

title sequence diagram - push variable updates out to a new materialized config for each service
actor ServiceDeveloper

ServiceDeveloper -> GH_repo: A developer publishes a new release on the monorepo
GH_repo -> cenv_ci_cd: The cenv_ci_cd github action workflow invokes determines that a new release has been published
cenv_ci_cd -> cenv_cli: The cenv_ci_cd github action calls 'cenv deploy -aa' which intern executes 'cenv deploy' on each service that uses cenv
cenv_cli -> AWS_ParameterStore: The cenv_cli then updates and or writes and updated parameters to the AWS Parameter Store service
cenv_cli -> AWS_AppConfig: Then the cli will create an AppConfig deployment against the 'cenv' application
AWS_AppConfig -> SNS_materialization_topic: Then the cenv AppConfig app will send a notification via the cenv_materialization_topic
SNS_materialization_topic -> CENV_materialization_lambda: The SNS_materialization_topic will deliver the deployment notification to the cenv_materialization_lambda
CENV_materialization_lambda -> AWS_AppConfig: The cenv_materialization_lambda will then materialize all the parameters required for each service into a config file and write it to the apps's AppConfig configuration profile
AWS_AppConfig -> SNS_invalidation_topic: Then the cenv AppConfig will send a notification to the SNS_invalidateion_topic
SNS_invalidateion_topic -> CENV_invalidation_lambda: The SNS_invalidation_topic will deliver the notification to the cenv_invalidation_lambda
cenv_invalidation_lambda -> AWS_Lambda: The cenv_invalidation_lambda will then invalidate any lambdas tied to this service config by updating an environment variable on the lambda with a new timestamp (which invalidates functions and forces them back into a spot where it needs to perform a cold start before it can execute again)
@enduml

@startuml

autonumber

title sequence diagram - push variable updates out to a new materialized config for each service
actor ServiceDeveloper

ServiceDeveloper -> GH_repo: A developer publishes a new release on the monorepo
GH_repo -> cenv_ci_cd: The cenv_ci_cd github action workflow invokes determines that a new release has been published
cenv_ci_cd -> cenv_cli: The cenv_ci_cd github action calls 'cenv deploy -aa' which intern executes 'cenv deploy' on each service that uses cenv
cenv_cli -> AWS_ParameterStore: The cenv_cli then updates and or writes and updated parameters to the AWS Parameter Store service
cenv_cli -> AWS_AppConfig: Then the cli will create an AppConfig deployment against the 'cenv' application
AWS_AppConfig -> SNS_materialization_topic: Then the cenv AppConfig app will send a notification via the cenv_materialization_topic
SNS_materialization_topic -> CENV_materialization_lambda: The SNS_materialization_topic will deliver the deployment notification to the cenv_materialization_lambda
CENV_materialization_lambda -> AWS_AppConfig: The cenv_materialization_lambda will then materialize all the parameters required for each service into a config file and write it to the apps's AppConfig configuration profile
AWS_AppConfig -> SNS_invalidation_topic: Then the cenv AppConfig will send a notification to the SNS_invalidateion_topic
SNS_invalidateion_topic -> CENV_invalidation_lambda: The SNS_invalidation_topic will deliver the notification to the cenv_invalidation_lambda
cenv_invalidation_lambda -> AWS_Lambda: The cenv_invalidation_lambda will then invalidate any lambdas tied to this service config by updating an environment variable on the lambda with a new timestamp (which invalidates functions and forces them back into a spot where it needs to perform a cold start before it can execute again)
@enduml

PlantUML version 1.2022.13(Sat Nov 19 07:22:17 CST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>